\documentclass[../plutus-core-specification.tex]{subfiles}

\begin{document}





\begin{figure*}
    \centering
    \[\begin{array}{lrclr}
        \textrm{Type Frame} & f  & ::= & \inConT{tcn}{\_}                          & \textrm{type constant}\\
                            &    &     & \inFunTLeft{\_}{A}                        & \textrm{left arrow}\\
                            &    &     & \inFunTRight{S}{\_}                       & \textrm{right arrow}\\
                            &    &     & \inAllT{\alpha}{K}{\_}                    & \textrm{all}\\
                            &    &     & \inFixT{\alpha}{\_}                       & \textrm{fix}\\
                            &    &     & \inLamT{\alpha}{K}{\_}                    & \textrm{$\lambda$}\\
                            &    &     & \inAppTLeft{\_}{A}                        & \textrm{left app}\\
                            &    &     & \inAppTRight{S}{\_}                       & \textrm{right app}\\
    \end{array}\]

    \caption{Grammar of Type Reduction Frames}
    \label{fig:Plutus_core_type_reduction_frames}
\end{figure*}





\begin{figure*}[t]
    \judgmentdef{\(\typeStep{A}{A'}\)}{Type $A$ reduces in one step to type $A'$}

    \begin{prooftree}
        \AxiomC{}
        \UnaryInfC{\(\typeStep{\appT{\lamT{\alpha}{K}{B}}{S}}{\subst{S}{\alpha}{B}}\)}
    \end{prooftree}

    \begin{prooftree}
        \AxiomC{\(\typeStep{A}{A'}\)}
        \UnaryInfC{\(\typeStep{\ctxsubst{f}{A}}{\ctxsubst{f}{A'}}\)}
    \end{prooftree}

    \caption{Type Reduction via Contextual Dynamics}
    \label{fig:Plutus_core_type_reduction}
\end{figure*}



\begin{figure*}[t]
	\judgmentdef{\(\kindEqual{K}{K'}\)}{Kind $K$ is syntactically identical to kind $K'$. (Inductive definition omitted.)}
	\vspace{2em}
	
	\judgmentdef{\(\typeEqual{A}{A'}\)}{Type $A$ is syntactically identical to type $A'$ modulo $\alpha$ conversion. (Inductive definition omitted.)}
	\vspace{2em}
	
	
	\judgmentdef{\(\typeEquiv{A}{A'}\)}{Type $A$ is equivalent to type $A'$ modulo $\beta$ reduction}
	
	\begin{prooftree}
		\AxiomC{\(\typeMultistep{A}{S}\)}
		\AxiomC{\(\typeMultistep{A'}{S'}\)}
		\AxiomC{\(\typeEqual{S}{S'}\)}
		\TrinaryInfC{\(\typeEquiv{A}{A'}\)}
	\end{prooftree}
	
	
	
	\caption{Equalities and Equivalences}
	\label{fig:Plutus_core_equalities_and_equivalences}
\end{figure*}





\begin{figure*}[t]
    \centering
    \[\begin{array}{lrclr}
        \textrm{Frame} &   &     & \inInstLeftFrame{A}                     & \textrm{left instantiation}\\
                       %&   &     & \inInstRightFrame{V}                    & \textrm{right instantiation}\\
                       %&   &     & \inWrapLeftFrame{\alpha}{M}             & \textrm{left wrap}\\
                       &   &     & \inWrapRightFrame{\alpha}{A}            & \textrm{right wrap}\\
                       &   &     & \inUnwrapFrame{}                        & \textrm{unwrap}\\
                       %&   &     & \inLamLeftFrame{x}{M}                   & \textrm{$\lambda$}\\
                       &   &     & \inAppLeftFrame{M}                      & \textrm{left app}\\
                       &   &     & \inAppRightFrame{V}                     & \textrm{right app}\\
                       &   &     & \inBuiltin{bn}{A^*}{V^*}{\_}{M^*}        & \textrm{builtin}\\
    \end{array}\]
    \caption{Grammar of Reduction Frames}
    \label{fig:Plutus_core_reduction_frames}
\end{figure*}




\begin{figure*}[t]
    \judgmentdef{\(\step{M}{M'}\)}{Term $M$ reduces in one step to term $M'$}

    \begin{prooftree}
        \AxiomC{}
        \UnaryInfC{\(\step{\inst{\abs{\alpha}{K}{V}}{A}}{V}\)}
    \end{prooftree}

    \begin{prooftree}
        \AxiomC{}
        \UnaryInfC{\(\step{\unwrap{\wrap{\alpha}{A}{V}}}{V}\)}
    \end{prooftree}

    \begin{prooftree}
        \AxiomC{}
        \UnaryInfC{\(\step{\app{\lam{x}{A}{M}}{V}}{\subst{V}{x}{M}}\)}
    \end{prooftree}

    \begin{prooftree}
        \AxiomC{$bn$ computes on $\repetition{A}$ and $\repetition{V}$ to $U$ according to \ref{fig:Plutus_core_builtins}}
        \UnaryInfC{\(\step{\builtin{bn}{\repetition{A}}{\repetition{V}}}{U}\)}
    \end{prooftree}

    %\begin{prooftree}
    %    \AxiomC{\(\typeStep{A}{A'}\)}
    %    \UnaryInfC{\(\step{\ctxsubst{f}{A}}{\ctxsubst{f}{A'}}\)}
    %\end{prooftree}

    \begin{prooftree}
        \AxiomC{\(\step{M}{M'}\)}
        \AxiomC{\(M' = \error{B}\)}
        \RightLabel{\footnotesize\textit{($A$ is the type of the frame, $B$ is the type of its hole)}}
        \BinaryInfC{\(\step{\ctxsubst{f}{M}}{\error{A}}\)}
    \end{prooftree}

    \begin{prooftree}
        \AxiomC{\(\step{M}{M'}\)}
        \AxiomC{\(M' \not= \error{B}\)}
        \BinaryInfC{\(\step{\ctxsubst{f}{M}}{\ctxsubst{f}{M'}}\)}
    \end{prooftree}






    \caption{Reduction via Contextual Dynamics}
    \label{fig:Plutus_core_reduction}
\end{figure*}



\end{document}
